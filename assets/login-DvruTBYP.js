import{R as u,r as l,k as O,h as f,i as h,l as n,C as P}from"./index-BVH3YHn-.js";import{I as S,l as E}from"./logoVito-XwPXCkoB.js";var j={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},v=u.createContext&&u.createContext(j),C=["attr","size","title"];function k(e,r){if(e==null)return{};var t=I(e,r),s,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)s=c[a],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(t[s]=e[s])}return t}function I(e,r){if(e==null)return{};var t={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(r.indexOf(s)>=0)continue;t[s]=e[s]}return t}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},g.apply(this,arguments)}function x(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,s)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?x(Object(t),!0).forEach(function(s){z(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function z(e,r,t){return r=D(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function D(e){var r=L(e,"string");return typeof r=="symbol"?r:r+""}function L(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var s=t.call(e,r||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function N(e){return e&&e.map((r,t)=>u.createElement(r.tag,p({key:t},r.attr),N(r.child)))}function _(e){return r=>u.createElement(M,g({attr:p({},e.attr)},r),N(e.child))}function M(e){var r=t=>{var{attr:s,size:a,title:c}=e,m=k(e,C),d=a||t.size||"1em",i;return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),u.createElement("svg",g({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,m,{className:i,style:p(p({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&u.createElement("title",null,c),e.children)};return v!==void 0?u.createElement(v.Consumer,null,t=>r(t)):r(j)}function A(e){return _({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(e)}function R(e){return _({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M376 186h-20v-40c0-55-45-100-100-100S156 91 156 146v40h-20c-22.002 0-40 17.998-40 40v200c0 22.002 17.998 40 40 40h240c22.002 0 40-17.998 40-40V226c0-22.002-17.998-40-40-40zM256 368c-22.002 0-40-17.998-40-40s17.998-40 40-40 40 17.998 40 40-17.998 40-40 40zm62.002-182H193.998v-40c0-34.004 28.003-62.002 62.002-62.002 34.004 0 62.002 27.998 62.002 62.002v40z"},child:[]}]})(e)}function W(e){return _({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 256c52.805 0 96-43.201 96-96s-43.195-96-96-96-96 43.201-96 96 43.195 96 96 96zm0 48c-63.598 0-192 32.402-192 96v48h384v-48c0-63.598-128.402-96-192-96z"},child:[]}]})(e)}f.defaults.xsrfCookieName="csrftoken";f.defaults.xsrfHeaderName="X-CSRFToken";f.defaults.withCredentials=!0;f.create({baseURL:h});function T(){const[e,r]=l.useState(""),[t,s]=l.useState(null);l.useState();const[a,c]=l.useState(null),[m,d]=l.useState(!1);O(),l.useEffect(()=>{f.get(h+"/odoo/usercheck/").then(o=>{o.data!=="Nope"&&(window.location.href="./")},[]).catch(o=>{console.log(o)})},[]),l.useEffect(()=>{t&&(d(!0),f.get(h+"/odoo/login/",{params:{user:t.user,pass:t.pass}},{withCredentials:!0}).then(o=>{r(o.data),o.data!="NoAuth"?(console.log("succes!"),c("success"),window.location.href="./"):(console.log("nah!"),c("failed")),d(!1)}).catch(o=>{console.log(o),d(!1)}))},[t]);function i(o){o.preventDefault(),c(null);const y=o.target,w=new FormData(y),b=Object.fromEntries(w.entries());console.log(b),s(b)}return n.jsx("div",{className:"container",children:n.jsxs("div",{className:"screen",children:[n.jsxs("div",{className:"screen__content",children:[n.jsxs("form",{className:"login",method:"post",onSubmit:i,children:[a==="failed"&&n.jsx("p",{className:"button__text",style:{color:"red",fontWeight:"bold",position:"absolute",top:"120px"},children:"Accesos incorrectos"}),a==="success"&&n.jsx("p",{className:"button__text",style:{color:"green",fontWeight:"bold",position:"absolute"},children:"Acceso exitoso"}),n.jsxs("div",{className:"login__field",children:[n.jsx("i",{className:"login__icon",children:n.jsx(W,{})}),n.jsx("input",{type:"text",name:"user",className:"login__input",placeholder:"Usuario / Email"})]}),n.jsxs("div",{className:"login__field",children:[n.jsx("i",{className:"login__icon",children:n.jsx(R,{})}),n.jsx("input",{type:"password",name:"pass",className:"login__input",placeholder:"Contrase√±a"})]}),n.jsxs("button",{className:"button login__submit",disabled:m,children:[m===!1&&n.jsx("span",{className:"button__text",children:"Iniciar Sesion"}),m===!0&&n.jsx(P,{color:"primary"}),n.jsx("i",{className:"button__icon",children:n.jsx(A,{})})]})]}),n.jsx("div",{className:"social-login",children:n.jsx(S,{src:E,className:"logo__image"})})]}),n.jsxs("div",{className:"screen__background",children:[n.jsx("span",{className:"screen__background__shape screen__background__shape4"}),n.jsx("span",{className:"screen__background__shape screen__background__shape3"}),n.jsx("span",{className:"screen__background__shape screen__background__shape2"}),n.jsx("span",{className:"screen__background__shape screen__background__shape1"})]})]})})}export{T as default};
