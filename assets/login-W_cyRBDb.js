import{R as u,r as l,j as w,h as f,k as n,C as O}from"./index-D0OCUon_.js";import{I as P}from"./chunk-QINAG4RG-D_5lgvg7.js";var x={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},b=u.createContext&&u.createContext(x),S=["attr","size","title"];function k(e,r){if(e==null)return{};var t=E(e,r),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(t[s]=e[s])}return t}function E(e,r){if(e==null)return{};var t={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},g.apply(this,arguments)}function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,s)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?v(Object(t),!0).forEach(function(s){C(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function C(e,r,t){return r=I(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function I(e){var r=z(e,"string");return typeof r=="symbol"?r:String(r)}function z(e,r){if(typeof e!="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var s=t.call(e,r||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function j(e){return e&&e.map((r,t)=>u.createElement(r.tag,h({key:t},r.attr),j(r.child)))}function p(e){return r=>u.createElement(L,g({attr:h({},e.attr)},r),j(e.child))}function L(e){var r=t=>{var{attr:s,size:a,title:o}=e,m=k(e,S),d=a||t.size||"1em",i;return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),u.createElement("svg",g({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,m,{className:i,style:h(h({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&u.createElement("title",null,o),e.children)};return b!==void 0?u.createElement(b.Consumer,null,t=>r(t)):r(x)}function D(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(e)}function M(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M376 186h-20v-40c0-55-45-100-100-100S156 91 156 146v40h-20c-22.002 0-40 17.998-40 40v200c0 22.002 17.998 40 40 40h240c22.002 0 40-17.998 40-40V226c0-22.002-17.998-40-40-40zM256 368c-22.002 0-40-17.998-40-40s17.998-40 40-40 40 17.998 40 40-17.998 40-40 40zm62.002-182H193.998v-40c0-34.004 28.003-62.002 62.002-62.002 34.004 0 62.002 27.998 62.002 62.002v40z"},child:[]}]})(e)}function R(e){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 256c52.805 0 96-43.201 96-96s-43.195-96-96-96-96 43.201-96 96 43.195 96 96 96zm0 48c-63.598 0-192 32.402-192 96v48h384v-48c0-63.598-128.402-96-192-96z"},child:[]}]})(e)}const A=""+new URL("logoVito-X6_elaYS.png",import.meta.url).href;f.defaults.xsrfCookieName="csrftoken";f.defaults.xsrfHeaderName="X-CSRFToken";f.defaults.withCredentials=!0;f.create({baseURL:"http://127.0.0.1:8000"});function F(){const[e,r]=l.useState(""),[t,s]=l.useState(null);l.useState();const[a,o]=l.useState(null),[m,d]=l.useState(!1);w(),l.useEffect(()=>{f.get("http://127.0.0.1:8000/odoo/usercheck/").then(c=>{c.data!=="Nope"&&(window.location.href="/")},[]).catch(c=>{console.log(c)})},[]),l.useEffect(()=>{t&&(d(!0),f.get("http://127.0.0.1:8000/odoo/login/",{params:{user:t.user,pass:t.pass}},{withCredentials:!0}).then(c=>{r(c.data),c.data!="NoAuth"?(console.log("succes!"),o("success"),window.location.href="/"):(console.log("nah!"),o("failed")),d(!1)}).catch(c=>{console.log(c),d(!1)}))},[t]);function i(c){c.preventDefault(),o(null);const y=c.target,N=new FormData(y),_=Object.fromEntries(N.entries());console.log(_),s(_)}return n.jsx("div",{className:"container",children:n.jsxs("div",{className:"screen",children:[n.jsxs("div",{className:"screen__content",children:[n.jsxs("form",{className:"login",method:"post",onSubmit:i,children:[a==="failed"&&n.jsx("p",{className:"button__text",style:{color:"red",fontWeight:"bold",position:"absolute",top:"120px"},children:"Accesos incorrectos"}),a==="success"&&n.jsx("p",{className:"button__text",style:{color:"green",fontWeight:"bold",position:"absolute"},children:"Acceso exitoso"}),n.jsxs("div",{className:"login__field",children:[n.jsx("i",{className:"login__icon",children:n.jsx(R,{})}),n.jsx("input",{type:"text",name:"user",className:"login__input",placeholder:"Usuario / Email"})]}),n.jsxs("div",{className:"login__field",children:[n.jsx("i",{className:"login__icon",children:n.jsx(M,{})}),n.jsx("input",{type:"password",name:"pass",className:"login__input",placeholder:"Contrase√±a"})]}),n.jsxs("button",{className:"button login__submit",disabled:m,children:[m===!1&&n.jsx("span",{className:"button__text",children:"Iniciar Sesion"}),m===!0&&n.jsx(O,{color:"primary"}),n.jsx("i",{className:"button__icon",children:n.jsx(D,{})})]})]}),n.jsx("div",{className:"social-login",children:n.jsx(P,{src:A,className:"logo__image"})})]}),n.jsxs("div",{className:"screen__background",children:[n.jsx("span",{className:"screen__background__shape screen__background__shape4"}),n.jsx("span",{className:"screen__background__shape screen__background__shape3"}),n.jsx("span",{className:"screen__background__shape screen__background__shape2"}),n.jsx("span",{className:"screen__background__shape screen__background__shape1"})]})]})})}export{F as default};
